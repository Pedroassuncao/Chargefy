{"ast":null,"code":"import _regeneratorRuntime from\"/home/pedro/Documents/ULP/Chargefy2/Chargefy2.0/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/pedro/Documents/ULP/Chargefy2/Chargefy2.0/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/pedro/Documents/ULP/Chargefy2/Chargefy2.0/web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{FiCheck,FiTrash,FiEye}from'react-icons/fi';import{Link,useHistory}from'react-router-dom';import{Map,Marker,TileLayer}from'react-leaflet';import mapIcon from'../../utils/mapIcon';import noOrph from\"../../images/no-orph.svg\";import DashSideBar from'../../components/DashSideBar';import'../../styles/pages/dashboard.css';import api from'../../services/api';import Pce from'../../views/Pce';export default function Pending(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pces=_useState2[0],setPces=_useState2[1];var history=useHistory();function notApproved(pce){return pce.approved===false;}useEffect(function(){api.get('pces').then(function(response){setPces(response.data);});},[]);var filteredPces=pces.filter(notApproved);function handleUpdate(_x){return _handleUpdate.apply(this,arguments);}function _handleUpdate(){_handleUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.post(\"/pces/update/\".concat(id));case 2:history.push('/updateSuccess');case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleUpdate.apply(this,arguments);}function handleRemove(_x2){return _handleRemove.apply(this,arguments);}function _handleRemove(){_handleRemove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.post(\"/pces/remove/\".concat(id));case 2:history.push('/removeSuccess');case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleRemove.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"page-registred\"},/*#__PURE__*/React.createElement(DashSideBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"content-wrapper\"},/*#__PURE__*/React.createElement(\"main\",{className:\"dashboard-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"registred-pces\"},/*#__PURE__*/React.createElement(\"div\",{className:\"info\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Postos Pendentes\"),/*#__PURE__*/React.createElement(\"p\",null,filteredPces.length,\" Posto(s)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"cards-wrapper\"},filteredPces.length===0?/*#__PURE__*/React.createElement(\"img\",{src:noOrph,alt:\"Sem Postos\",className:\"no-orph\"}):null,filteredPces.map(function(pce){return/*#__PURE__*/React.createElement(\"div\",{key:pce.id,className:\"card\"},/*#__PURE__*/React.createElement(Map,{key:pce.id,center:[pce.latitude,pce.longitude],style:{width:'100%',height:280},zoom:13},/*#__PURE__*/React.createElement(TileLayer,{url:\"https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/256/{z}/{x}/{y}@2x?access_token=\".concat(process.env.REACT_APP_MAPBOX_TOKEN)}),/*#__PURE__*/React.createElement(Marker,{interactive:false,icon:mapIcon,position:[pce.latitude,pce.longitude]}),\")\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-info\"},/*#__PURE__*/React.createElement(\"h2\",null,pce.name),/*#__PURE__*/React.createElement(\"div\",{className:\"card-buttons\"},/*#__PURE__*/React.createElement(Link,{to:\"/pces/\".concat(pce.id),className:\"card-btn\"},/*#__PURE__*/React.createElement(FiEye,{size:20})),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUpdate(pce.id);},className:\"card-btn\"},/*#__PURE__*/React.createElement(FiCheck,{size:20})),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleRemove(pce.id);},className:\"card-btn\"},/*#__PURE__*/React.createElement(FiTrash,{size:20})))));}))))));}","map":{"version":3,"sources":["/home/pedro/Documents/ULP/Chargefy2/Chargefy2.0/web/src/views/Dashboard/PendingPces.tsx"],"names":["React","useEffect","useState","FiCheck","FiTrash","FiEye","Link","useHistory","Map","Marker","TileLayer","mapIcon","DashSideBar","api","Pce","Pending","pces","setPces","history","notApproved","pce","approved","get","then","response","data","filteredPces","filter","handleUpdate","id","post","push","handleRemove","length","noOrph","map","latitude","longitude","width","height","process","env","REACT_APP_MAPBOX_TOKEN","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { FiCheck, FiTrash, FiEye } from 'react-icons/fi';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Map, Marker, TileLayer } from 'react-leaflet';\n\nimport mapIcon from '../../utils/mapIcon';\nimport noOrph from '../../images/no-orph.svg';\n\nimport DashSideBar from '../../components/DashSideBar';\n\nimport '../../styles/pages/dashboard.css';\n\nimport api from '../../services/api';\nimport Pce from '../../views/Pce';\n\ninterface Pce {\n  id: number;\n  latitude: number;\n  longitude: number;\n  name: string;\n  approved: boolean;\n}\n\nexport default function Pending() {\n  const [pces, setPces] = useState<Pce[]>([]);\n\n  const history = useHistory();\n\n  function notApproved(pce: Pce) {\n    return pce.approved === false;\n  }\n\n  useEffect(() => {\n    api.get('pces').then((response) => {\n      setPces(response.data);\n    });\n  }, []);\n\n  const filteredPces = pces.filter(notApproved);\n\n  async function handleUpdate(id: any) {\n    await api.post(`/pces/update/${id}`);\n\n    history.push('/updateSuccess');\n  }\n\n  async function handleRemove(id: any) {\n    await api.post(`/pces/remove/${id}`);\n\n    history.push('/removeSuccess');\n  }\n\n  return (\n    <div id=\"page-registred\">\n      <DashSideBar />\n      <div className=\"content-wrapper\">\n        <main className=\"dashboard-main\">\n          <div className=\"registred-pces\">\n            <div className=\"info\">\n              <h1>Postos Pendentes</h1>\n              <p>{filteredPces.length} Posto(s)</p>\n            </div>\n            <div className=\"cards-wrapper\">\n              {filteredPces.length === 0 ? (\n                <img src={noOrph} alt=\"Sem Postos\" className=\"no-orph\" />\n              ) : null}\n              {filteredPces.map((pce) => {\n                return (\n                  <div key={pce.id} className=\"card\">\n                    <Map\n                      key={pce.id}\n                      center={[pce.latitude, pce.longitude]}\n                      style={{ width: '100%', height: 280 }}\n                      zoom={13}\n                    >\n                      <TileLayer\n                        url={`https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}\n                      />\n                      <Marker\n                        interactive={false}\n                        icon={mapIcon}\n                        position={[pce.latitude, pce.longitude]}\n                      />\n                      )\n                    </Map>\n\n                    <div className=\"card-info\">\n                      <h2>{pce.name}</h2>\n\n                      <div className=\"card-buttons\">\n                        <Link\n                          to={`/pces/${pce.id}`}\n                          className=\"card-btn\"\n                        >\n                          <FiEye size={20} />\n                        </Link>\n                        <button\n                          onClick={() => handleUpdate(pce.id)}\n                          className=\"card-btn\"\n                        >\n                          <FiCheck size={20} />\n                        </button>\n\n                        <button\n                          onClick={() => handleRemove(pce.id)}\n                          className=\"card-btn\"\n                        >\n                          <FiTrash size={20} />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}